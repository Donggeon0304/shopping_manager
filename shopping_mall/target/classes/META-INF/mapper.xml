<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shopping_mall">

<select id="search" parameterType="Map" resultType="userdto">
select * from user
<choose><!-- 여러가지 형태의 쿼리문을 사용시 적용하는 태그 where+if => choose 개선된 형태 -->
	<when test="part==1"> <!-- 아이디 찾기 -->
		where uname=#{uname} and uemail=#{uemail}
	</when>
	<when test="part==2"> <!-- 패스워드 찾기 -->
		where uid=#{uid} and uname=#{uname}
	</when>
	<otherwise>
		order by uidx desc;
	</otherwise>
</choose>
</select>

<!-- shopping_admin -->
<insert id="insert">
insert into shopping_admin values ('0',#{aid},#{apass},#{aname},#{aemail},#{atel},#{ateam},#{aposition},#{ause},now())
</insert>

<select id="idck" resultType="admindto">
select * from shopping_admin where aid=#{aid}
</select>

<select id="select" resultType="admindto">
select * from shopping_admin order by aidx desc
</select>

<update id="update">
update shopping_admin set ause=#{ause} where aidx=#{aidx}
</update>

<!-- siteinfo -->
<insert id="site_insert">
insert into siteinfo values ('0',#{page_name},#{admin_email},#{point_use},#{join_point},#{join_level},#{com_name},#{business_num},#{ceo_name},#{ceo_tel},#{mob_num},#{vat_num},#{com_post},#{com_address},#{info_name},#{info_email})
</insert>

<insert id="pay_insert">
insert into pay values ('0',#{bank},#{account_num},#{card_use},#{phone_use},#{giftcard_use},#{min_point},#{max_point},#{cash_receipt},#{deli_name},#{deli_price},#{deli_date})
</insert>

<select id="site_select" resultType="siteinfodto">
select * from siteinfo
</select>

<select id="pay_select" resultType="paydto">
select * from pay
</select>
</mapper>